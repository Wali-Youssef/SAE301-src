import{C as l}from"./pocketbase.es-2eb1282e.js";import{_ as a,o as u,c as d,a as n,b as c}from"./index-400c42da.js";const e=new l({}.VITE_POCKETBASE_URL);var o;const r={methods:{async login(){await e.collection("users").authWithPassword(document.getElementById("email").value,document.getElementById("passwd").value),e.authStore.isValid&&(document.getElementById("status").innerHTML="Vous etes maintenant connecté(e)",o=e.authStore.model,this.$router.push("/"))},async register(){o=await e.collection("users").create({email:document.getElementById("email").value,password:document.getElementById("passwd").value,passwordConfirm:document.getElementById("passwd").value,name:"John Di"}),o&&(document.getElementById("status").innerHTML="Nous vous avons envoyer un mail de vérifictaion ...",await e.collection("users").requestVerification(document.getElementById("email").value))},async googlelogin(){await e.collection("users").authWithOAuth2({provider:"google"}),e.authStore.isValid&&(document.getElementById("status").innerHTML="Vous êtes maintenant connecté avec Google",o=e.authStore.model,document.getElementById("signOut").style.visibility="hidden",document.getElementById("addPoem").style.visibility="visible")},async loginGithub(){await e.collection("users").authWithOAuth2({provider:"github"}),e.authStore.isValid&&(document.getElementById("status").innerHTML="Vous êtes maintenant connecté(e) avec Github",o=e.authStore.model)},async createPoem(){await e.collection("poems").create({title:document.getElementById("title").value,content:document.getElementById("content").value,private:document.getElementById("notpublic").value,email:o.email,illustration:document.getElementById("file").files[0]})}}},m={class:"login-container"},g={class:"card"},v=c('<h1>Connectez-vous !</h1><div class="input-group"><label for="email">Adresse mail</label><input class="input-field" type="email" required id="email" placeholder="username@domain.tld"></div><div class="input-group"><label for="passwd">Mot de passe</label><input class="input-field" type="password" required id="passwd"></div>',3),p={class:"social-login"},y=n("p",{class:"status"},[n("label",{id:"status"}," Vous n'êtes pas connecté ")],-1);function b(h,t,f,B,E,i){return u(),d("div",m,[n("div",g,[v,n("button",{class:"btn register-btn",onClick:t[0]||(t[0]=s=>i.register())},"S'inscrire"),n("button",{class:"btn login-btn",onClick:t[1]||(t[1]=s=>i.login())},"Se connecter"),n("div",p,[n("button",{class:"btn google-btn",onClick:t[2]||(t[2]=s=>i.googlelogin())},"Google"),n("button",{class:"btn github-btn",onClick:t[3]||(t[3]=s=>i.loginGithub())},"Github")]),y])])}const I=a(r,[["render",b]]);export{I as default};
